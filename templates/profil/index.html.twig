{% extends 'base.html.twig' %}

{% block title %}Profil Utilisateur{% endblock %}

    {% block body %}
    <h2>Mes informations</h2>
        <ul class="list-group">
            
            

            {# {% if app.user %} #}

        
            <li class="list-group-item">Votre prénom: {{app.user.prenom}}</li>      
            <li class="list-group-item">Votre nom: {{app.user.nom}}</li>
            <li class="list-group-item">Votre mot de passe: ******** </li>
            <li class="list-group-item">Votre e-mail: {{app.user.email}}</li>
            <li class="list-group-item">Votre adresse: {{app.user.address}}</li>
            <li class="list-group-item">Votre ville: {{app.user.city}}</li>
            <li class="list-group-item">Votre code postal: {{app.user.zipCode}}</li>
            <li class="list-group-item">Votre numéro de téléphone: {{app.user.phone}}</li>

            
            <li class="list-group-item"><a class="btn btn-secondary" href="{{ path('app_profil_edit', {'id': app.user.id}) }}">Modifier mes informations</a></li>

            <br>
            <li class="list-group-item">{{include('profil/_delete_form.html.twig')}}</li>
           

            {# {% endif %} #}

            <br><br>
            <li class="list-group-item">Votre wishlist:</li>
             {% for game in app.user.games %}   
              <li><a href="{{ path('app_onegame', {'id': game.id}) }}">{{game.title}}</a></li>
             {% endfor %}

            <li class="list-group-item" >Votre identifiant: {{app.user.id}}</li> 
            <li class="list-group-item">Autorisations:
    
            
                {% for role in app.user.roles %}
                 {% if role == 'ROLE_ADMIN'%}
                     Administrateur
               
    
                {% elseif role == 'ROLE_USER'%}
                    Utilisateur
    
    
                {% endif %}
    
                {{not loop.last ? ',' : ''}}

                    
                {% endfor %}
            </li> 

           
        </ul>

        <h2>Mes abonnements</h2>
        {% if app.user %}
        
            {% for  sub in app.user.userSubscriptions %}
                <ul>
                <li>Identifiant : {{ sub.id }}</li>
                {# START subscription #}
                <li>Abonnement :  {{ sub.subscription.title }} </li>
                {# <li>Nombre de jeux :  {{ sub.subscription.gamesNumber }} </li> #}
                {# ... #}
                {# END subscription #}
                <li>Date de souscription : {{ sub.startDate|date('d-m-Y') }}</li>
                <li>Utilisation de la réduction : {{ sub.isDiscountUsed }}</li>
                </ul>
            {% else %}
                <p>Il n'y a pas d'abonnements</p>
            {% endfor %}

        {% else %}
            <p>L'utilisateur n'est pas connecté</p>
        {% endif %}

    {% endblock %}
